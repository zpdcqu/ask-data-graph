
这是一份为基于知识图谱的智能问数系统前端设计的模块和交互文档。

**前端技术栈推荐:**

*   **框架:** React (或 Vue.js)
*   **UI 组件库:** Ant Design (提供丰富的企业级组件，与后端设计风格统一)
*   **状态管理:** Redux Toolkit (或 Zustand, Recoil)
*   **图表库:** AntV G2/G6 (G6 用于知识图谱可视化, G2 用于数据结果图表), ECharts
*   **HTTP Client:** Axios
*   **路由:** React Router

**一、 整体布局与导航 (Overall Layout & Navigation)**

*   **布局:**
    *   **顶部导航栏:** Logo, 系统名称, 用户信息 (头像, 用户名, 下拉菜单包含“个人中心”、“退出登录”)。
    *   **左侧菜单栏:** 可伸缩的垂直菜单，包含系统主要功能模块的入口。
    *   **内容区域:** 右侧主体部分，用于显示各个模块的具体内容。
*   **交互:**
    *   点击左侧菜单项，内容区域切换到对应模块。
    *   顶部用户下拉菜单提供快捷操作。
    *   面包屑导航 (Breadcrumbs) 显示当前页面在系统中的层级位置，方便用户回溯。

**二、 模块设计与交互**

**1. 仪表盘/首页 (Dashboard / Home)**

*   **目的:** 提供系统概览，常用功能快捷入口，以及关键指标展示。
*   **关键 UI 元素:**
    *   欢迎语，当前用户信息。
    *   快捷入口卡片 (例如：“开始提问”、“管理数据源”、“查看图谱”)。
    *   统计图表 (例如：数据源数量、知识图谱构建次数、近期查询量等)。
    *   最近活动列表 (例如：最近的查询、最近的图谱构建任务)。
*   **用户交互:**
    *   点击快捷入口卡片直接跳转到相应功能模块。
    *   图表可提供悬浮提示 (Tooltip) 查看具体数据。

**2. 数据源管理模块 (Data Source Management)**

*   **目的:** 允许用户添加、查看、编辑、删除和测试各种数据源的连接。
*   **子视图/组件:**
    *   **数据源列表视图:**
        *   **UI 元素:**
            *   表格展示数据源列表 (列: 名称, 类型, 状态, 创建者, 创建时间, 上次测试时间, 操作)。
            *   “新增数据源” 按钮。
            *   搜索框 (按名称搜索)。
            *   筛选器 (按类型、状态筛选)。
            *   分页组件。
        *   **交互:**
            *   点击“新增数据源”按钮，弹出创建表单。
            *   表格操作列包含“编辑”、“删除”、“测试连接”按钮。
            *   点击行或“编辑”按钮，进入编辑表单。
            *   点击“删除”按钮，弹出确认对话框。
            *   点击“测试连接”按钮，显示测试结果 (成功/失败及信息)。
    *   **数据源创建/编辑表单 (模态框或独立页面):**
        *   **UI 元素:**
            *   表单字段：名称 (输入框), 类型 (下拉选择框), 描述 (文本域)。
            *   **动态连接参数区域:** 根据选择的“类型”动态显示不同的连接参数输入字段 (例如 MySQL: 主机, 端口, 用户名, 密码, 数据库名; CSV: 文件上传按钮)。
            *   “保存”按钮, “取消”按钮, “测试连接”按钮。
        *   **交互:**
            *   选择不同“类型”，连接参数区域动态更新。
            *   输入连接参数后，可点击“测试连接”验证。
            *   点击“保存”，提交表单数据至后端。

**3. 知识图谱构建流程管理模块 (Knowledge Graph Pipeline Management)**

*   **目的:** 管理数据到知识图谱的转换流程 (Pipelines)。
*   **子视图/组件:**
    *   **流程列表视图:**
        *   **UI 元素:**
            *   表格展示流程列表 (列: 名称, 描述, 目标图谱名, 调度规则, 状态, 创建者, 操作)。
            *   “创建流程”按钮。
            *   搜索框, 筛选器 (按状态)。
            *   分页组件。
        *   **交互:**
            *   点击“创建流程”按钮，进入创建表单。
            *   表格操作列包含“编辑”、“删除”、“查看任务”、“立即运行”、“查看运行记录”按钮。
            *   点击流程名称或“编辑”按钮，进入流程编辑页面。
            *   点击“查看任务”，跳转到该流程下的任务编排视图。
            *   点击“立即运行”，弹出确认对话框，触发流程执行。
    *   **流程创建/编辑表单 (独立页面):**
        *   **UI 元素:**
            *   表单字段：名称, 描述, 目标知识图谱名称, 调度规则 (Cron表达式输入或友好选择器), 是否激活 (开关)。
            *   “保存”按钮, “取消”按钮。
        *   **交互:**
            *   填写表单，点击“保存”。
    *   **流程运行记录视图 (模态框或独立页面):**
        *   **UI 元素:**
            *   表格展示该流程的历次运行记录 (列: 运行ID, 触发者, 开始时间, 结束时间, 状态, 操作)。
            *   操作列包含“查看详情” (可看该次运行下各任务状态)。
        *   **交互:**
            *   点击“查看详情”深入了解某次运行。

**4. 知识图谱构建任务编排模块 (KG Pipeline Task Orchestration)**

*   **目的:** 在特定流程下，定义和管理从数据源到图谱元素的具体映射规则 (Tasks)。通常作为流程详情页的一部分。
*   **UI 元素 (在流程详情页内):**
    *   任务列表/画布：
        *   **列表形式:** 表格展示任务 (列: 顺序, 任务名, 源数据源, 映射类型, 目标标签/类型, 操作)。
        *   **画布形式 (更高级):** 可视化拖拽界面，节点代表数据源、转换操作、目标图谱实体，连线代表数据流和依赖关系。
    *   “添加任务”按钮。
*   **交互:**
    *   点击“添加任务”，弹出任务创建/编辑表单。
    *   任务列表操作列包含“编辑”、“删除”、“上移”、“下移” (调整顺序)。
    *   **任务创建/编辑表单 (模态框):**
        *   **UI 元素:**
            *   任务名称, 任务顺序。
            *   源数据源选择 (下拉列表，从已添加的数据源中选择)。
            *   源实体标识 (输入框，例如表名、文件名)。
            *   映射类型 (选择：节点/关系)。
            *   目标标签/类型 (输入框)。
            *   **字段映射区域 (核心):**
                *   提供界面让用户定义源字段如何映射到目标图谱实体的属性。
                *   对于节点映射：源字段 -> 目标属性名, 是否主键。
                *   对于关系映射：定义源节点匹配规则 (标签, 属性条件), 目标节点匹配规则, 关系属性映射。
                *   可能需要支持简单的转换函数。
            *   过滤条件 (文本域，输入SQL WHERE子句等)。
            *   是否启用 (开关)。
            *   “保存”按钮, “取消”按钮。
        *   **交互:**
            *   根据选择的“映射类型”动态调整表单内容。
            *   字段映射区域提供添加/删除映射项的功能。

**5. 知识图谱可视化模块 (Knowledge Graph Visualization)**

*   **目的:** 以图形方式展示和探索构建好的知识图谱。
*   **UI 元素:**
    *   **主图谱显示区域:** 使用 AntV G6 或类似库渲染图谱。
    *   **搜索框:** 输入节点名称或属性值进行搜索。
    *   **筛选器/图例:** 按节点标签、关系类型进行筛选或高亮显示。
    *   **工具栏:** 缩放、平移、全屏、布局切换等。
    *   **信息面板:** 点击节点或关系时，显示其详细属性信息。
*   **交互:**
    *   鼠标拖拽平移画布，滚轮缩放。
    *   点击节点：
        *   高亮该节点及其直接关联的节点和关系。
        *   在信息面板显示该节点属性。
        *   可提供右键菜单 (例如：“展开一度关系”、“隐藏节点”)。
    *   点击关系：在信息面板显示该关系属性。
    *   搜索框输入后，图中匹配的节点高亮或居中显示。
    *   筛选器操作会动态更新图中显示的元素。

**6. 智能问答模块 (Intelligent Q&A / NL2SQL)**

*   **目的:** 用户通过自然语言提问，系统将其转换为SQL并在目标数据库执行，返回结果。
*   **UI 元素:**
    *   **自然语言输入框:** 用户输入问题的地方，支持回车提交。
    *   **目标数据源选择器 (可选):** 如果用户需要指定查询哪个数据库。通常系统应能根据问题或配置自动判断。
    *   **“提问”/“运行”按钮。**
    *   **结果展示区域:**
        *   **生成的SQL语句显示区域 (可选，可折叠):** 对于高级用户或调试有用。
        *   **查询结果展示:**
            *   表格形式 (默认)。
            *   图表形式 (可选，用户可切换，例如柱状图、折线图、饼图)。
        *   查询状态/耗时信息。
    *   **反馈按钮/区域:** “结果满意/不满意”、“提供反馈” (可打分、评论)。
    *   **历史提问列表 (可选):** 显示当前会话或用户的历史提问，方便复用。
*   **交互:**
    *   用户在输入框输入问题，点击“提问”或回车。
    *   系统处理后，在结果区域显示SQL (如果开启) 和查询结果。
    *   如果结果是表格，支持排序、分页。
    *   如果支持图表，用户可以选择不同的图表类型来可视化结果。
    *   用户可以点击反馈按钮提交对查询结果的评价。

**7. 查询日志模块 (Query Log)**

*   **目的:** 查看用户历史提问记录、系统生成的SQL、执行状态和用户反馈。
*   **UI 元素:**
    *   表格展示查询日志 (列: 用户, 自然语言问题, 生成的SQL, 目标数据源, 执行状态, 时间, 用户反馈评分, 操作)。
    *   筛选器 (按用户, 数据源, 日期范围, 执行状态)。
    *   分页组件。
    *   操作列包含“查看详情”。
    *   **查询日志详情 (模态框或独立页面):**
        *   显示该条日志的所有信息，包括完整的自然语言问题、SQL、执行结果预览、错误信息（如有）、用户反馈评论。
*   **交互:**
    *   通过筛选器查找特定日志。
    *   点击“查看详情”查看完整信息。

**8. 数据库元数据管理模块 (Database Schema Metadata Management)**

*   **目的:** 管理用于 NL2SQL 的关系型数据库的元数据，特别是列的业务描述，以提高LLM理解能力。
*   **UI 元素:**
    *   **数据源选择器:** 选择要管理元数据的关系型数据源。
    *   **元数据展示区域:**
        *   通常以树形结构或表格分组展示：数据库 -> 表 -> 列。
        *   表格展示列信息 (列: 表名, 列名, 数据类型, 主键/外键, **业务描述 (可编辑)**, **语义标签 (可编辑)**, 示例值)。
    *   “同步元数据”按钮 (针对选定数据源)。
    *   “保存修改”按钮 (当编辑了描述或标签后)。
*   **交互:**
    *   选择数据源后，加载并显示其元数据。
    *   点击“同步元数据”，向后端请求刷新该数据源的最新表结构。
    *   用户可以直接在表格中编辑“业务描述”和“语义标签”字段。
    *   编辑后，点击“保存修改”将更新提交到后端。

**9. 用户管理模块 (User Management - Admin Only)**

*   **目的:** 管理系统用户账户。
*   **UI 元素:**
    *   用户列表表格 (列: 用户名, 邮箱, 角色, 创建时间, 操作)。
    *   “新增用户”按钮。
    *   搜索/筛选用户。
    *   操作列：“编辑角色”、“重置密码”、“删除用户”。
    *   **用户创建/编辑表单:** 字段包括用户名、邮箱、密码（创建时）、角色选择。
*   **交互:**
    *   管理员进行用户的增删改查操作。

**10. 个人中心/设置模块 (Profile/Settings)**

*   **目的:** 用户查看和修改自己的信息。
*   **UI 元素:**
    *   显示当前用户信息 (用户名, 邮箱, 角色)。
    *   修改密码表单。
    *   其他偏好设置 (例如：默认显示条数)。
*   **交互:**
    *   用户查看个人信息。
    *   用户修改自己的密码。

---

这份文档提供了一个前端模块和交互的蓝图。在实际开发过程中，UI/UX 设计师会进一步细化视觉风格、组件细节和用户体验流程。每个模块的交互都应该以用户友好、操作直观为目标。
